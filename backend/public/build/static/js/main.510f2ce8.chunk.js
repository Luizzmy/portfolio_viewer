(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{193:function(e,t,n){},291:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(25),i=n.n(c),o=(n(193),n(97)),s=n(24),l=n(300),u=n(295),j=n(296),d=n(39),b=n(23),f=n.n(b),p=n(30),O=n(29),h=n(81),x=n.n(h),v=x.a.create({baseURL:"/",withCredentials:!0}),m=function(e){return v.post("/login",e)},g=function(){return v.get("/current-user")},y=function(){return v.get("/logout")},w=n(7),k=Object(r.createContext)(),S=function(e){var t=Object(r.useState)(null),n=Object(O.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,n=t.data,i(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var i=function(e){c(e)},o={user:a,login:i,logout:function(){c(null)},addProfilePic:function(e){return c(Object(d.a)(Object(d.a)({},a),{},{img:e}))}};return Object(w.jsx)(k.Provider,Object(d.a)(Object(d.a)({},e),{},{value:o}))},C=function(){return Object(r.useContext)(k)},I=n(172),N=n.n(I),P=n(302),F=n(42),E=x.a.create({baseURL:"/",withCredentials:!0}),V=function(){return E.get("/user-portfolios")},_=function(e){return E.post("/new-portfolio",e)},R=function(e,t){return E.put("/edit/".concat(e),t)},T=(n(212),n(150)),q=n(111),D=n(139),J=n(299),A=n(298),B=["index"],H=["title","editable","children","dataIndex","record","handleSave"],L=["_id"],W=l.a.Text,M=a.a.createContext(null),U=function(e){e.index;var t=Object(D.a)(e,B),n=J.a.useForm(),r=Object(O.a)(n,1)[0];return Object(w.jsx)(J.a,{form:r,component:!1,children:Object(w.jsx)(M.Provider,{value:r,children:Object(w.jsx)("tr",Object(d.a)({},t))})})},z=function(e){var t=e.title,n=e.editable,a=e.children,c=e.dataIndex,i=e.record,o=e.handleSave,s=Object(D.a)(e,H),l=Object(r.useState)(!1),u=Object(O.a)(l,2),j=u[0],b=u[1],h=Object(r.useRef)(null),x=Object(r.useContext)(M);Object(r.useEffect)((function(){j&&h.current.focus()}),[j]);var v=function(){b(!j),x.setFieldsValue(Object(q.a)({},c,i[c]))},m=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.validateFields();case 3:t=e.sent,v(),o(Object(d.a)(Object(d.a)({},i),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=a;return n&&(g=j?Object(w.jsx)(J.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(w.jsx)(P.a,{ref:h,onPressEnter:m,onBlur:m})}):Object(w.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:v,children:a})),Object(w.jsx)("td",Object(d.a)(Object(d.a)({},s),{},{children:g}))};function X(e){return"string"===typeof e&&(e=e.replace(/,/g,".")),e}function $(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return t;return null}var G=function(e){var t=e.data;console.log(t);var n=Object(r.useState)(),a=Object(O.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(),s=Object(O.a)(o,2),l=s[0],b=s[1],h=Object(r.useState)(!1),v=Object(O.a)(h,2),m=v[0],g=v[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://openexchangerates.org/api/currencies.json");case 2:n=e.sent,r=n.data,t&&(t.forEach((function(e){console.log(e.Currency),r.hasOwnProperty(e.Currency)?e.Currency=r[e.Currency]:$(r,e.Currency)?e.Currency=$(r,e.Currency):e.Currency="Not_a_currency"})),i(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(t.CSVData)}),[t.CSVData]),Object(r.useEffect)((function(){!function(e){if(c){console.log("algo paso aqui tambien");var t=0;e.forEach((function(e){var n=parseFloat(X(e.Price))*parseFloat(X(e.FXRate))*e.Holding;t+=n})),b(t)}}(c)}),[c]),Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(f.a.mark((function e(){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=9;break}return t.CSVData=c,sessionStorage.setItem("csvFile",JSON.stringify(t)),n=t._id,r=Object(D.a)(t,L),console.log(n),console.log(r),e.next=8,R(n,r);case 8:g(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c,t,m]);var y=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(T.a)(c),r=n.findIndex((function(e){return t.key===e.key})),a=n[r],n.splice(r,1,Object(d.a)(Object(d.a)({},a),t)),i(n),g(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={body:{row:U,cell:z}},S=t.header.map((function(e){return e.editable?Object(d.a)(Object(d.a)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:y}}}):e}));return Object(w.jsx)("div",{children:Object(w.jsxs)("div",{style:{marginTop:"15px"},children:[Object(w.jsxs)(u.a,{justify:"space-between",children:[Object(w.jsx)(j.a,{children:Object(w.jsx)(F.a,{onClick:function(){var e={};for(var n in t.CSVData[0])e[n]="key"===n?c.length:"Price"===n||"Holding"===n||"FXRate"===n?0:"new_row";var r=[].concat(Object(T.a)(c),[e]);i(r)},type:"primary",style:{marginBottom:16},children:"Add a row"})}),Object(w.jsx)(j.a,{children:Object(w.jsxs)(W,{children:["Name of Portfolio: ",t.fileName]})}),Object(w.jsx)(j.a,{children:l?Object(w.jsxs)(W,{children:["Total portfolio value kr ",l]}):null})]}),c?Object(w.jsx)(A.a,{components:k,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:c,columns:S,pagination:{pageSize:50}}):null]})})},K=function(){var e=Object(r.useState)({csvfile:null,tShirts:[null],felpe:[null]}),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(JSON.parse(sessionStorage.getItem("csvFile"))||""),i=Object(O.a)(c,2),o=i[0],s=i[1];function l(e,t){return u.apply(this,arguments)}function u(){return(u=Object(p.a)(f.a.mark((function e(t,n){var r,c,i,o,l,u,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a({csvfile:null}),r=t.data,c=Object.keys(r[0]),i=[],o=[],c.forEach((function(e){i.push({title:e,dataIndex:e,editable:!0})})),l=0;l<r.length;l++)r[l].key=l,o.push(r[l]);return console.log(o),u={fileName:n.name,header:i,CSVData:o},e.next=11,_(u);case 11:j=e.sent,console.log(j),u._id=j.data._id,s(u),console.log(u);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){o&&sessionStorage.setItem("csvFile",JSON.stringify(o)),console.log(o)}),[o]),console.log(sessionStorage),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"upload",children:[Object(w.jsx)(P.a,{type:"file",name:"file",placeholder:null,onChange:function(e){a({csvfile:e.target.files[0]})}}),Object(w.jsx)("p",{}),Object(w.jsx)(F.a,{onClick:function(e){e.preventDefault();var t=n.csvfile;t&&N.a.parse(t,{header:!0,dynamicTyping:!0,complete:l})},type:"primary",children:"Upload a CSV File"})]}),o?Object(w.jsx)(G,{data:o}):null]})},Q=n(303),Y=n(304),Z=n(301);var ee=function(){var e=Object(r.useState)(!0),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),i=Object(O.a)(c,2),o=(i[0],i[1],Object(r.useState)([])),s=Object(O.a)(o,2),l=(s[0],s[1]),u=Object(r.useState)([]),j=Object(O.a)(u,2),d=j[0],b=j[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!1),e.next=3,V();case 3:t=e.sent,n=t.data,console.log(n),l(n),b(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var h=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,a=t,E.get("/portfolio/".concat(a));case 3:n=e.sent,r=n.data,sessionStorage.setItem("csvFile",JSON.stringify(r)),window.location.reload(),console.log(r);case 8:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,c=t._id,E.get("/delete/".concat(c));case 3:n=e.sent,n.data,r=d.indexOf(t),a=d.filter((function(e,t){return t!==r})),b(a);case 8:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{children:Object(w.jsx)(Y.b,{className:"demo-loadmore-list",loading:n,itemLayout:"horizontal",dataSource:d,renderItem:function(e){return Object(w.jsx)(Y.b.Item,{actions:[Object(w.jsx)(F.a,{type:"link",onClick:function(){return h(e._id)},children:"edit"},"list-loadmore-edit"),Object(w.jsx)(F.a,{type:"link",onClick:function(){return x(e)},children:"delete"},"list-loadmore-more")],children:Object(w.jsx)(Z.a,{avatar:!0,title:!1,loading:e.loading,active:!0,children:Object(w.jsx)(Y.b.Item.Meta,{title:Object(w.jsx)("p",{children:e.fileName})})})})}})})};var te=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)(F.a,{type:"primary",onClick:c,children:"View All Portfolios"}),Object(w.jsx)(Q.a,{title:"Basic Modal",visible:n,onOk:function(){a(!1)},onCancel:function(){a(!1)},children:Object(w.jsx)(ee,{})})]})},ne=l.a.Title;var re=function(){return C().user?Object(w.jsx)("div",{children:Object(w.jsx)(u.a,{children:Object(w.jsxs)(j.a,{sm:24,children:[Object(w.jsx)(ne,{level:1,children:" Welcome to the Portfolio Viewer App"}),Object(w.jsx)(ne,{level:2,children:" Please upload a portfolio as a CSV file, look at your previous portfolios or choose one from the sider to view the detail and be able to edit"}),Object(w.jsx)(te,{}),Object(w.jsx)("br",{}),Object(w.jsx)(K,{}),Object(w.jsx)("br",{})]})})}):Object(w.jsx)(s.a,{to:"/"})};var ae=function(){return Object(w.jsx)("div",{children:Object(w.jsx)("h2",{children:"Not found"})})},ce=n(297),ie=n(78),oe=n(305),se=(ie.a.SubMenu,ce.a.Sider);var le=function(e){e.history;var t=C(),n=(t.user,t.logout);function r(){return(r=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:sessionStorage.clear(),n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(w.jsx)(se,{width:200,className:"site-layout-background",children:Object(w.jsx)(ie.a,{mode:"inline",style:{height:"100%",borderRight:0},children:Object(w.jsx)(ie.a.Item,{icon:Object(w.jsx)(oe.a,{}),onClick:function(){return r.apply(this,arguments)},children:"Logout"},"1")})})},ue=ce.a.Header,je=ce.a.Content;var de=function(e){var t=e.children;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(ce.a,{style:{minHeight:"100vh"},children:[Object(w.jsx)(ue,{className:"site-layout-background",style:{padding:0}}),Object(w.jsxs)(ce.a,{className:"site-layout",children:[Object(w.jsx)(le,{}),Object(w.jsx)(u.a,{justify:"end",align:"middle",style:!0}),Object(w.jsx)(je,{style:{margin:"0 16px",textAlign:"left"},children:Object(w.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360,backgroundColor:"white"},children:t})})]})]})})},be=n(183),fe=function(e){be.b.error(e)},pe=l.a.Title;var Oe=function(e){var t=e.history,n=J.a.useForm(),r=Object(O.a)(n,1)[0],a=C(),c=a.login;function i(){return(i=Object(p.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),m(n).then((function(e){c({data:e}),t.push("/home")})).catch((function(e){var t=e.response.data.message;fe(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.user?Object(w.jsx)(s.a,{to:"/home"}):Object(w.jsxs)("div",{children:[Object(w.jsx)(u.a,{align:"middle",justify:"space-around",children:Object(w.jsx)(j.a,{flex:"center"})}),Object(w.jsx)(u.a,{align:"middle",justify:"space-around",children:Object(w.jsxs)(j.a,{flex:"center",children:[Object(w.jsx)(pe,{level:1,children:"Welcome to the Portfolio Viewer App"}),Object(w.jsxs)(J.a,{layout:"vertical",form:r,onFinish:function(e){return i.apply(this,arguments)},children:[Object(w.jsx)(J.a.Item,{name:"email",label:"Email:",rules:[{required:!0,type:"email",message:"please input your email"}],children:Object(w.jsx)(P.a,{})}),Object(w.jsx)(J.a.Item,{name:"password",label:"Password:",rules:[{required:!0,message:"password is required"}],children:Object(w.jsx)(P.a.Password,{})}),Object(w.jsx)(F.a,{type:"primary",block:!0,htmlType:"submit",children:"Login"})]})]})})]})},he=function(){return Object(w.jsx)(o.a,{children:Object(w.jsxs)(s.d,{children:[Object(w.jsx)(s.b,{exact:!0,path:"/",component:Oe}),Object(w.jsxs)(de,{children:[Object(w.jsx)(s.b,{exact:!0,path:"/home",component:re}),Object(w.jsx)(s.b,{exact:!0,path:"/profile",component:re})]}),Object(w.jsx)(s.b,{component:ae})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(290);i.a.render(Object(w.jsx)(S,{children:Object(w.jsx)(he,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[291,1,2]]]);
//# sourceMappingURL=main.510f2ce8.chunk.js.map